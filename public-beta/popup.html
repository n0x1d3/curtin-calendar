<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Curtin Calendar</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="app">
      <div class="header">
        <div class="header-row">
          <!-- title-group holds the logo, name, and beta badge side by side -->
          <div class="title-group">
            <img src="icons/curtin-crest.webp" alt="Curtin crest" class="curtin-logo" />
            <p class="title">Curtin Calendar</p>
            <!-- beta-badge is hidden by default; JS adds body.beta to reveal it -->
            <span class="beta-badge">Beta</span>
          </div>
          <button id="theme-toggle" class="theme-toggle">ðŸŒ™</button>
        </div>
        <p class="subtitle">Timetable to .ics converter</p>
      </div>

      <ol class="instructions">
        <!-- "My Classes" is a button styled as an inline link; JS opens eStudent -->
        <li>Open <button class="inline-link" id="open-estudent">My Classes</button> in eStudent</li>
        <li>Select your semester and click <strong>Download</strong></li>
        <li><strong>Import</strong> the downloaded file to your calendar</li>
      </ol>

      <div class="semester-toggle">
        <label class="toggle-option">
          <input id="semester1" type="radio" name="semester" value="1" />
          <span>Semester 1</span>
        </label>
        <label class="toggle-option">
          <input id="semester2" type="radio" name="semester" value="2" />
          <span>Semester 2</span>
        </label>
      </div>

      <div class="button-container">
        <!-- loader-area: shown while scraping; hidden when idle -->
        <div class="loader-area" id="loader-area">
          <div class="loader" id="loader"></div>
          <div class="progress-track">
            <div class="progress-fill" id="progress-bar"></div>
          </div>
          <p class="progress-text" id="progress-text">Startingâ€¦</p>
          <p class="progress-note">This window may close â€” your download will still complete</p>
          <!-- Cancel resets the session and returns to idle -->
          <button class="cancel-btn" id="cancel">Cancel</button>
        </div>

        <!-- success-area: briefly shown after a successful download -->
        <div class="success-area" id="success-area">
          <div class="success-check">âœ“</div>
          <p class="success-text">Download complete!</p>
        </div>

        <!-- download button with inline SVG download icon -->
        <button id="download" class="button">
          <svg class="download-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 2v8M5 7l3 3 3-3"/>
            <path d="M3 13h10"/>
          </svg>
          Download
        </button>
      </div>

      <p id="error">â›” An error occurred</p>

      <!-- Version number injected by JS from the manifest -->
      <p class="version" id="version"></p>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
